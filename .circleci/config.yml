version: 2.1

orbs:
  maven: circleci/maven@1.1.1
  slack: circleci/slack@4.3.0

jobs:
  test: # name of your job
    docker: # executor type
      - image: buildpack-deps:trusty # primary container will run Ubuntu Trusty
    steps:
      - run:
          name: Generate google credentials json
          command: 'sh credential-generate.sh'
      - run:
          command: 'mvn test -B'
      - slack/notify:
          event: fail
          template: basic_fail_1
      - slack/notify:
          event: pass
          template: basic_success_1

workflows:
  test_keepid_staging:
    jobs:
      - test:
          context: Keep.id Slack