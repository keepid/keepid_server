version: 2.1

orbs:
  maven: circleci/maven@1.1.1
  slack: circleci/slack@4.3.0

jobs:
  build: # name of your job
    docker: # executor type
      - image: buildpack-deps:trusty # primary container will run Ubuntu Trusty
    steps:
      - run:
          command: 'ls -a'
      - run:
          name: Generate google credentials json
          command: 'sh <parameters.app_src_directory>/credential-generate.sh'
  notify:
    docker: # executor type
      - image: buildpack-deps:trusty # primary container will run Ubuntu Trusty
    steps:
    - slack/notify:
        event: fail
        template: basic_fail_1
    - slack/notify:
        event: pass
        template: basic_success_1

workflows:
  test_keepid_staging:
    jobs:
      - build
      - maven/test
      - notify:
          context: Keep.id Slack